define(function(){"use strict";!function(a){var b=function(){function b(a,c){return 0==c?a:b(c,a%c)}function c(a,c){return a/b(a,c)*c}var d={autoPlay:{timeout:1e3},duration:600,size:0,shifts:2},e=function(){var b=this.options.node;this.arrow={prev:a('<span class="arrowCont prev"><em class="arrow"></em></span>'),next:a('<span class="arrowCont next"><em class="arrow"></em></span>')};var d=a('<div class="windows"></div>');b.append(this.arrow.prev,d,this.arrow.next),this.list=b.find(".list"),d.append(this.list);var e=b.find(".item"),f=0;if(this.options.autoPlay)for(var f=c(this.options.shifts,e.length)/e.length,g=0,h=f;g<h;g++)e.first().before(e.clone()),e.last().after(e.clone());var i={width:e.outerWidth(!0),height:e.outerHeight(!0)};this.item=i,this.windowSize=i.width*this.options.size,this.shiftRate=i.width*this.options.shifts;var j=0;b.find(".item").each(function(a,b){b.style.left=j+"px",j+=i.width}),d.css({width:this.windowSize,height:i.height}),this.pos={start:f*e.length},this.options.autoPlay?this.pos.next=this.pos.start+f*e.length:e.length<this.options.size?this.pos.next=this.pos.start:this.pos.next=e.length-this.options.size,this.pos.prev=this.pos.start-f*e.length},f=function(){this.pos.scroll=this.pos.start,this.list.css({left:-this.item.width*this.pos.start+"px"})},g=function(){this.pos.scroll>=this.pos.next?this.arrow.next.addClass("disable"):this.arrow.next.removeClass("disable"),this.pos.scroll<=this.pos.prev?this.arrow.prev.addClass("disable"):this.arrow.prev.removeClass("disable")},h=function(){var a=this;this.animation||(this.animation=!0,this.list.animate({left:"-="+this.shiftRate+"px"},this.options.duration,function(){a.animation=!1,a.pos.scroll+=a.options.shifts,a.options.autoPlay?(a.pos.scroll==a.pos.next&&f.call(a),setTimeout(function(){a.mouseEnter||h.call(a)},a.options.autoPlay.timeout)):g.call(a)}))},i=function(){var a=this;this.animation||(this.animation=!0,this.list.animate({left:"+="+this.shiftRate+"px"},this.options.duration,function(){a.animation=!1,a.pos.scroll-=a.options.shifts,a.options.autoPlay?a.pos.scroll==a.pos.prev&&f.call(a):g.call(a)}))},j=function(){var b=this;this.arrow.next.click(function(){a(this).hasClass("disable")||h.call(b)}),this.arrow.prev.click(function(){a(this).hasClass("disable")||i.call(b)}),this.options.autoPlay&&this.options.node.mouseenter(function(){b.mouseEnter=!0}).mouseleave(function(){b.mouseEnter=!1,h.call(b)})},k=function(b){this.options=a.extend(!0,{},d,b)},l=function(a){k.call(this,a),e.call(this),j.call(this),f.call(this),this.options.autoPlay?h.call(this):g.call(this)},m=function(){};return{init:l,reset_init:m}}();a.fn.carousel=function(b){a.each(this,function(d,e){var f=null;b&&(b.node=a(e),f=new c(b),a(e).data("carousel",f))})};var c=function(a){var b=a.node.data("carousel");b&&b.reset_init(),this.init(a)};c.prototype=b}(jQuery)});